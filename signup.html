<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daftar - KantekGO</title>
  <style>
    body{font-family:Inter,Arial,sans-serif;margin:0;background:#fbf6f0;color:#111}
    .wrap{max-width:420px;margin:60px auto;padding:20px}
    .card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.06)}
    input{width:100%;padding:10px;margin:8px 0;border:1px solid #ddd;border-radius:8px}
    button{padding:10px 14px;border:none;background:#7fb36b;color:#fff;border-radius:8px;cursor:pointer}
    .alternate{margin-top:12px;color:#555;font-size:.95rem}
    a.link{color:#f2994a;text-decoration:none;margin-left:6px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h2>Daftar Akun</h2>

      <label for="name">Nama</label>
      <input id="name" type="text" placeholder="Nama lengkap">

      <label for="email">Email</label>
      <input id="email" type="email" placeholder="email@contoh.com">

      <label for="password">Password</label>
      <input id="password" type="password" placeholder="Password (min 6 karakter)">

      <div style="margin-top:12px">
        <button id="signupBtn">Daftar</button>
      </div>

      <div class="alternate">
        Sudah punya akun? <a class="link" href="login.html">Masuk</a>
      </div>

      <div id="msg" style="margin-top:10px;color:red"></div>
    </div>
  </div>

  <script>
    function showMsg(t, color='red') {
      const el = document.getElementById('msg');
      el.style.color = color;
      el.textContent = t;
    }

    document.getElementById('signupBtn').addEventListener('click', ()=>{
      const name = (document.getElementById('name').value || '').trim();
      const email = (document.getElementById('email').value || '').trim().toLowerCase();
      const pw = document.getElementById('password').value || '';

      if (!name || !email || !pw) { showMsg('Lengkapi semua field.'); return; }
      if (pw.length < 6) { showMsg('Password minimal 6 karakter.'); return; }

      let users = [];
      try { users = JSON.parse(localStorage.getItem('users') || '[]'); } catch(e) { users = []; }

      if (users.find(u => u.email === email)) { showMsg('Email sudah terdaftar. Silakan login.'); return; }

      const newUser = { name, email, password: pw };
      users.push(newUser);
      localStorage.setItem('users', JSON.stringify(users));

      // auto-login setelah daftar (simpan currentUser tanpa password)
      const current = { name, email };
      localStorage.setItem('currentUser', JSON.stringify(current));

      showMsg('Akun berhasil dibuat. Mengalihkan...', 'green');
      setTimeout(()=> {
        // redirect ke halaman utama atau return param jika ada
        const params = new URLSearchParams(location.search);
        const ret = params.get('return') ? decodeURIComponent(params.get('return')) : 'index.html';
        location.href = ret;
      }, 900);
    });
  </script>
</body>
</html>
